{"version":3,"file":"ProductRating.js","names":["ProductRating","Control","extend","renderer","apiVersion","render","rm","control","tooltip","getTooltip_AsString","openStart","class","attr","openEnd","renderControl","getAggregation","close","metadata","properties","value","type","defaultValue","aggregations","_rating","multiple","visibility","_label","_button","events","change","parameters","constructor","_constructor","id","settings","Control.prototype.constructor.call","this","init","_init","setAggregation","RatingIndicator","getValue","iconSize","liveChange","_onRate","bind","Label","text","addStyleClass","Button","press","_onSubmit","setValue","_setValue","setProperty","reset","_reset","resourceBundle","getModel","getResourceBundle","setDesign","setEnabled","setText","getText","event","getParameter","getSource","getMaxValue","fireEvent"],"sources":["ProductRating.ts"],"sourcesContent":["import Control from \"sap/ui/core/Control\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport {MetadataOptions} from \"sap/ui/core/Element\";\nimport Label from \"sap/m/Label\";\nimport Button, {Button$PressEvent} from \"sap/m/Button\";\nimport RatingIndicator, {RatingIndicator$LiveChangeEvent} from \"sap/m/RatingIndicator\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\n/**\n * @namespace project_d.control\n */\nexport default class ProductRating extends Control {\n    // The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n    constructor(idOrSettings?: string | $ProductRatingSettings);\n    constructor(id?: string, settings?: $ProductRatingSettings);\n    constructor(id?: string, settings?: $ProductRatingSettings) {\n        super(id, settings);\n    }\n\n    static readonly metadata: MetadataOptions = {\n        properties: {\n            value: {\n                type: \"float\",\n                defaultValue: 0\n            }\n        },\n        aggregations: {\n            _rating: {\n                type: \"sap.m.RatingIndicator\",\n                multiple: false,\n                visibility: \"hidden\"\n            },\n            _label: {\n                type: \"sap.m.Label\",\n                multiple: false,\n                visibility: \"hidden\"\n            },\n            _button: {\n                type: \"sap.m.Button\",\n                multiple: false,\n                visibility: \"hidden\"\n            }\n        },\n        events: {\n            change: {\n                parameters: {\n                    \"value\": \"float\"\n                }\n            }\n        }\n    }\n\n    init(): void {\n        this.setAggregation(\"_rating\", new RatingIndicator({\n            value: this.getValue(),\n            iconSize: \"2rem\",\n            liveChange: this._onRate.bind(this)\n        }));\n        this.setAggregation(\"_label\", new Label({\n            text: \"{i18n>productRatingLabelInitial}\"\n        }).addStyleClass(\"sapUiSmallMargin\"));\n        this.setAggregation(\"_button\", new Button({\n            text: \"{i18n>productRatingButton}\",\n            press: this._onSubmit.bind(this)\n        }).addStyleClass(\"sapUiTinyMarginTopBottom\"));\n    }\n\n    setValue(value: \"float\"): ProductRating {\n        this.setProperty(\"value\", value, true);\n        (this.getAggregation(\"_rating\") as RatingIndicator).setValue(value);\n\n        return this;\n    }\n\n    reset(): void {\n        const resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\n        this.setValue(0);\n        (this.getAggregation(\"_label\") as Label).setDesign(\"Standard\");\n        (this.getAggregation(\"_rating\") as RatingIndicator).setEnabled(true);\n        (this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelInitial\"));\n        (this.getAggregation(\"_button\") as Button).setEnabled(true);\n    }\n\n    _onRate(event: RatingIndicator$LiveChangeEvent): void {\n        const resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n        const value = event.getParameter(\"value\");\n\n        this.setProperty(\"value\", value, true);\n\n        (this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelIndicator\", [value, (event.getSource() as RatingIndicator).getMaxValue()]));\n        (this.getAggregation(\"_label\") as Label).setDesign(\"Bold\");\n    }\n\n    _onSubmit(event: Button$PressEvent): void {\n        const resourceBundle = (this?.getModel(\"i18n\") as ResourceModel)?.getResourceBundle() as ResourceBundle;\n\n        (this.getAggregation(\"_rating\") as RatingIndicator).setEnabled(false);\n        (this.getAggregation(\"_label\") as Label).setText(resourceBundle.getText(\"productRatingLabelFinal\"));\n        (this.getAggregation(\"_button\") as Button).setEnabled(false);\n        this.fireEvent(\"change\", {\n            value: this.getValue()\n        })\n    }\n\n    static renderer = {\n        apiVersion: 4,\n        render: (rm: RenderManager, control: ProductRating) => {\n            const tooltip = control.getTooltip_AsString();\n            rm.openStart(\"div\", control);\n            rm.class(\"myAppDemoWTProductRating\");\n            if (tooltip) {\n                rm.attr(\"title\", tooltip);\n            }\n            rm.openEnd();\n            rm.renderControl(control.getAggregation(\"_rating\") as Control);\n            rm.renderControl(control.getAggregation(\"_label\") as Control);\n            rm.renderControl(control.getAggregation(\"_button\") as Control);\n            rm.close(\"div\");\n        }\n    }\n};\n"],"mappings":"0HASA,MAGqBA,EAAsBC,EAAOC,OAAA,mCA8FvCC,SAAW,CACdC,WAAY,EACZC,OAAQA,CAACC,EAAmBC,KACxB,MAAMC,EAAUD,EAAQE,sBACxBH,EAAGI,UAAU,MAAOH,GACpBD,EAAGK,MAAM,4BACT,GAAIH,EAAS,CACTF,EAAGM,KAAK,QAASJ,EACrB,CACAF,EAAGO,UACHP,EAAGQ,cAAcP,EAAQQ,eAAe,YACxCT,EAAGQ,cAAcP,EAAQQ,eAAe,WACxCT,EAAGQ,cAAcP,EAAQQ,eAAe,YACxCT,EAAGU,MAAM,SAnGDC,SAA4B,CACxCC,WAAY,CACRC,MAAO,CACHC,KAAM,QACNC,aAAc,IAGtBC,aAAc,CACVC,QAAS,CACLH,KAAM,wBACNI,SAAU,MACVC,WAAY,UAEhBC,OAAQ,CACJN,KAAM,cACNI,SAAU,MACVC,WAAY,UAEhBE,QAAS,CACLP,KAAM,eACNI,SAAU,MACVC,WAAY,WAGpBG,OAAQ,CACJC,OAAQ,CACJC,WAAY,CACRX,MAAS,YA/BzBY,YAAW,SAAAC,EAACC,EAAaC,GACrBC,6BAAAC,KAAMH,EAAIC,EACd,EAmCAG,KAAI,SAAAC,IACAF,KAAKG,eAAe,UAAW,IAAIC,EAAgB,CAC/CrB,MAAOiB,KAAKK,WACZC,SAAU,OACVC,WAAYP,KAAKQ,QAAQC,KAAKT,SAElCA,KAAKG,eAAe,SAAU,IAAIO,EAAM,CACpCC,KAAM,qCACPC,cAAc,qBACjBZ,KAAKG,eAAe,UAAW,IAAIU,EAAO,CACtCF,KAAM,6BACNG,MAAOd,KAAKe,UAAUN,KAAKT,QAC5BY,cAAc,4BACrB,EAEAI,SAAQ,SAAAC,EAAClC,GACLiB,KAAKkB,YAAY,QAASnC,EAAO,MAChCiB,KAAKrB,eAAe,WAA+BqC,SAASjC,GAE7D,OAAOiB,IACX,EAEAmB,MAAK,SAAAC,IACD,MAAMC,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAElEvB,KAAKgB,SAAS,GACbhB,KAAKrB,eAAe,UAAoB6C,UAAU,YAClDxB,KAAKrB,eAAe,WAA+B8C,WAAW,MAC9DzB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,8BACvE3B,KAAKrB,eAAe,WAAsB8C,WAAW,KAC1D,EAEAjB,QAAO,SAAAA,EAACoB,GACJ,MAAMP,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAClE,MAAMxC,EAAQ6C,EAAMC,aAAa,SAEjC7B,KAAKkB,YAAY,QAASnC,EAAO,MAEhCiB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,8BAA+B,CAAC5C,EAAQ6C,EAAME,YAAgCC,iBACrJ/B,KAAKrB,eAAe,UAAoB6C,UAAU,OACvD,EAEAT,UAAS,SAAAA,EAACa,GACN,MAAMP,EAAkBrB,MAAMsB,SAAS,SAA2BC,oBAEjEvB,KAAKrB,eAAe,WAA+B8C,WAAW,OAC9DzB,KAAKrB,eAAe,UAAoB+C,QAAQL,EAAeM,QAAQ,4BACvE3B,KAAKrB,eAAe,WAAsB8C,WAAW,OACtDzB,KAAKgC,UAAU,SAAU,CACrBjD,MAAOiB,KAAKK,YAEpB,IAkBF,OA9GmBzC,CAAa","ignoreList":[]}